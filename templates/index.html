<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ticket Support System - Analytics Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header h1 {
            color: white;
            font-size: 28px;
            font-weight: 700;
        }

        .header-actions {
            display: flex;
            gap: 15px;
        }

        .btn {
            padding: 10px 20px;
            border-radius: 10px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #007aff;
            color: white;
        }

        .btn-primary:hover {
            background: #0056cc;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 24px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
        }

        .stat-value {
            font-size: 36px;
            font-weight: 700;
            color: #1d1d1f;
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 14px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .analytics-section {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
            color: #1d1d1f;
        }

        .card-actions {
            display: flex;
            gap: 10px;
        }

        .filter-select {
            padding: 8px 12px;
            border-radius: 8px;
            border: 1px solid #ddd;
            background: white;
            font-size: 14px;
        }

        .search-container {
            display: grid;
            grid-template-columns: 1fr auto auto;
            gap: 15px;
            margin-bottom: 30px;
        }

        .search-box {
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 15px 15px 15px 45px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            color: white;
            font-size: 16px;
        }

        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255, 255, 255, 0.7);
        }

        .tickets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: 20px;
            width: 100%;
        }

        .ticket-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 280px;
        }

        .ticket-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(31, 38, 135, 0.5);
        }

        .ticket-content {
            flex: 1;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .ticket-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            flex-shrink: 0;
        }

        .ticket-id {
            font-size: 12px;
            font-weight: 600;
            color: #007aff;
            background: rgba(0, 122, 255, 0.1);
            padding: 4px 8px;
            border-radius: 6px;
        }

        .priority-badge {
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            padding: 4px 8px;
            border-radius: 4px;
            letter-spacing: 0.5px;
        }

        .priority-urgent { background: #ff3b30; color: white; }
        .priority-high { background: #ff9500; color: white; }
        .priority-normal { background: #34c759; color: white; }
        .priority-low { background: #8e8e93; color: white; }

        .ticket-subject {
            font-size: 16px;
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 8px;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            flex-shrink: 0;
        }

        .ticket-sender {
            font-size: 14px;
            color: #666;
            margin-bottom: 12px;
            flex-shrink: 0;
        }

        .ticket-preview {
            font-size: 14px;
            color: #666;
            line-height: 1.5;
            margin-bottom: 16px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            flex: 1;
        }

        .ticket-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
            flex-shrink: 0;
        }

        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-open { background: #e8f5e8; color: #2e7d32; }
        .status-closed { background: #e3f2fd; color: #1976d2; }
        .status-pending { background: #fff3e0; color: #f57c00; }

        .ticket-time {
            font-size: 12px;
            color: #999;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 30px;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 24px;
            cursor: pointer;
            color: #999;
        }

        .modal-header {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .modal-title {
            font-size: 24px;
            font-weight: 700;
            color: #1d1d1f;
            margin-bottom: 5px;
        }

        .modal-meta {
            display: flex;
            gap: 15px;
            font-size: 14px;
            color: #666;
        }

        .modal-body {
            margin-bottom: 30px;
        }

        .modal-message {
            line-height: 1.6;
            margin-bottom: 25px;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .analytics-section {
                grid-template-columns: 1fr;
            }

            .search-container {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .tickets-grid {
                grid-template-columns: 1fr;
            }

            .ticket-card {
                height: auto;
                min-height: 240px;
            }

            .stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .modal-content {
                width: 95%;
                margin: 2% auto;
                max-height: 95vh;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Ticket Support Dashboard</h1>
            <div class="header-actions">
                <button class="btn btn-primary">New Ticket</button>
                <button class="btn btn-secondary">Export</button>
            </div>
        </div>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-value">142</div>
                <div class="stat-label">Total Tickets</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">24</div>
                <div class="stat-label">Open Tickets</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">67</div>
                <div class="stat-label">Closed Today</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">3.2h</div>
                <div class="stat-label">Avg. Response Time</div>
            </div>
        </div>

        <div class="search-container">
            <div class="search-box">
                <span class="search-icon">🔍</span>
                <input type="text" class="search-input" placeholder="Search tickets...">
            </div>
            <select class="filter-select">
                <option>All Status</option>
                <option>Open</option>
                <option>Closed</option>
                <option>Pending</option>
            </select>
            <select class="filter-select">
                <option>All Priorities</option>
                <option>Urgent</option>
                <option>High</option>
                <option>Normal</option>
                <option>Low</option>
            </select>
        </div>

        <div class="tickets-grid">
            <!-- Sample Ticket 1 -->
            <div class="ticket-card" data-id="12345">
                <div class="ticket-content">
                    <div class="ticket-header">
                        <span class="ticket-id">#TK-2023-12345</span>
                        <span class="priority-badge priority-urgent">Urgent</span>
                    </div>
                    <h3 class="ticket-subject">Website outage affecting checkout process</h3>
                    <p class="ticket-sender">From: john.doe@example.com</p>
                    <p class="ticket-preview">Customers are reporting that they cannot complete purchases on our website. The issue started approximately 45 minutes ago and seems to be affecting all users...</p>
                    <div class="ticket-meta">
                        <span class="status-badge status-open">Open</span>
                        <span class="ticket-time">2 hours ago</span>
                    </div>
                </div>
            </div>

            <!-- Sample Ticket 2 -->
            <div class="ticket-card" data-id="12346">
                <div class="ticket-content">
                    <div class="ticket-header">
                        <span class="ticket-id">#TK-2023-12346</span>
                        <span class="priority-badge priority-high">High</span>
                    </div>
                    <h3 class="ticket-subject">Password reset not working for admin accounts</h3>
                    <p class="ticket-sender">From: admin@company.com</p>
                    <p class="ticket-preview">Several administrators are reporting that the password reset function is not working for admin-level accounts. They receive the email but the link returns a 404 error...</p>
                    <div class="ticket-meta">
                        <span class="status-badge status-pending">Pending</span>
                        <span class="ticket-time">5 hours ago</span>
                    </div>
                </div>
            </div>

            <!-- Sample Ticket 3 -->
            <div class="ticket-card" data-id="12347">
                <div class="ticket-content">
                    <div class="ticket-header">
                        <span class="ticket-id">#TK-2023-12347</span>
                        <span class="priority-badge priority-normal">Normal</span>
                    </div>
                    <h3 class="ticket-subject">Request for additional API access</h3>
                    <p class="ticket-sender">From: dev.team@partner.com</p>
                    <p class="ticket-preview">We would like to request additional API permissions to access the reporting endpoints for our integration. Our current access is limited to basic data...</p>
                    <div class="ticket-meta">
                        <span class="status-badge status-open">Open</span>
                        <span class="ticket-time">1 day ago</span>
                    </div>
                </div>
            </div>

            <!-- Sample Ticket 4 -->
            <div class="ticket-card" data-id="12348">
                <div class="ticket-content">
                    <div class="ticket-header">
                        <span class="ticket-id">#TK-2023-12348</span>
                        <span class="priority-badge priority-low">Low</span>
                    </div>
                    <h3 class="ticket-subject">Question about refund policy</h3>
                    <p class="ticket-sender">From: customer@example.com</p>
                    <p class="ticket-preview">I would like to know more about your refund policy for annual subscriptions. I purchased a subscription 3 months ago but no longer need the service...</p>
                    <div class="ticket-meta">
                        <span class="status-badge status-closed">Closed</span>
                        <span class="ticket-time">2 days ago</span>
                    </div>
                </div>
            </div>

            <!-- Sample Ticket 5 -->
            <div class="ticket-card" data-id="12349">
                <div class="ticket-content">
                    <div class="ticket-header">
                        <span class="ticket-id">#TK-2023-12349</span>
                        <span class="priority-badge priority-high">High</span>
                    </div>
                    <h3 class="ticket-subject">Database connection errors in production</h3>
                    <p class="ticket-sender">From: alerts@monitoring.com</p>
                    <p class="ticket-preview">Our monitoring system has detected an increased number of database connection errors in the production environment. The error rate has gone up by 35% in the last hour...</p>
                    <div class="ticket-meta">
                        <span class="status-badge status-open">Open</span>
                        <span class="ticket-time">3 hours ago</span>
                    </div>
                </div>
            </div>

            <!-- Sample Ticket 6 -->
            <div class="ticket-card" data-id="12350">
                <div class="ticket-content">
                    <div class="ticket-header">
                        <span class="ticket-id">#TK-2023-12350</span>
                        <span class="priority-badge priority-normal">Normal</span>
                    </div>
                    <h3 class="ticket-subject">Documentation update request</h3>
                    <p class="ticket-sender">From: technical.writer@company.com</p>
                    <p class="ticket-preview">The API documentation for the new endpoints is missing several important parameters and examples. Can you please provide the complete specification so I can update the docs...</p>
                    <div class="ticket-meta">
                        <span class="status-badge status-pending">Pending</span>
                        <span class="ticket-time">4 days ago</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="ticketModal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <div class="modal-header">
                <h2 class="modal-title" id="modalSubject">Website outage affecting checkout process</h2>
                <div class="modal-meta">
                    <span id="modalId">#TK-2023-12345</span>
                    <span id="modalPriority">Priority: <span class="priority-urgent">Urgent</span></span>
                    <span id="modalSender">From: john.doe@example.com</span>
                </div>
            </div>
            <div class="modal-body">
                <p class="modal-message" id="modalMessage">
                    Customers are reporting that they cannot complete purchases on our website. The issue started approximately 45 minutes ago and seems to be affecting all users. Error messages indicate a problem with the payment gateway integration. Our monitoring shows increased failed requests to the payment API.
                </p>
                <div class="modal-attachments">
                    <h3>Attachments</h3>
                    <ul id="modalAttachments">
                        <li><a href="#">error_logs.txt</a></li>
                        <li><a href="#">screenshot.png</a></li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary">Assign to Me</button>
                <button class="btn btn-primary">Update Status</button>
            </div>
        </div>
    </div>

    <script>
        // Sample data for the tickets
        const tickets = [
            {
                id: '12345',
                subject: 'Website outage affecting checkout process',
                sender: 'john.doe@example.com',
                priority: 'urgent',
                status: 'open',
                time: '2 hours ago',
                message: 'Customers are reporting that they cannot complete purchases on our website. The issue started approximately 45 minutes ago and seems to be affecting all users. Error messages indicate a problem with the payment gateway integration. Our monitoring shows increased failed requests to the payment API.',
                attachments: ['error_logs.txt', 'screenshot.png']
            },
            {
                id: '12346',
                subject: 'Password reset not working for admin accounts',
                sender: 'admin@company.com',
                priority: 'high',
                status: 'pending',
                time: '5 hours ago',
                message: 'Several administrators are reporting that the password reset function is not working for admin-level accounts. They receive the email but the link returns a 404 error. This appears to be a routing issue specific to admin subdomains.',
                attachments: ['admin_logs.zip']
            },
            {
                id: '12347',
                subject: 'Request for additional API access',
                sender: 'dev.team@partner.com',
                priority: 'normal',
                status: 'open',
                time: '1 day ago',
                message: 'We would like to request additional API permissions to access the reporting endpoints for our integration. Our current access is limited to basic data, but we need to generate comprehensive reports for our clients.',
                attachments: ['api_spec.pdf']
            },
            {
                id: '12348',
                subject: 'Question about refund policy',
                sender: 'customer@example.com',
                priority: 'low',
                status: 'closed',
                time: '2 days ago',
                message: 'I would like to know more about your refund policy for annual subscriptions. I purchased a subscription 3 months ago but no longer need the service. Can I get a partial refund for the remaining period?',
                attachments: []
            },
            {
                id: '12349',
                subject: 'Database connection errors in production',
                sender: 'alerts@monitoring.com',
                priority: 'high',
                status: 'open',
                time: '3 hours ago',
                message: 'Our monitoring system has detected an increased number of database connection errors in the production environment. The error rate has gone up by 35% in the last hour. This is affecting multiple services that rely on database access.',
                attachments: ['metrics.png', 'db_logs.txt']
            },
            {
                id: '12350',
                subject: 'Documentation update request',
                sender: 'technical.writer@company.com',
                priority: 'normal',
                status: 'pending',
                time: '4 days ago',
                message: 'The API documentation for the new endpoints is missing several important parameters and examples. Can you please provide the complete specification so I can update the docs before the release next week?',
                attachments: ['current_docs.pdf']
            }
        ];

        // Modal functionality
        const modal = document.getElementById('ticketModal');
        const closeModal = document.querySelector('.modal-close');
        const ticketCards = document.querySelectorAll('.ticket-card');

        ticketCards.forEach(card => {
            card.addEventListener('click', () => {
                const ticketId = card.getAttribute('data-id');
                const ticket = tickets.find(t => t.id === ticketId);
                
                if (ticket) {
                    document.getElementById('modalSubject').textContent = ticket.subject;
                    document.getElementById('modalId').textContent = `#TK-2023-${ticket.id}`;
                    document.getElementById('modalPriority').innerHTML = `Priority: <span class="priority-badge priority-${ticket.priority}">${ticket.priority.charAt(0).toUpperCase() + ticket.priority.slice(1)}</span>`;
                    document.getElementById('modalSender').textContent = `From: ${ticket.sender}`;
                    document.getElementById('modalMessage').textContent = ticket.message;
                    
                    // Clear attachments
                    const attachmentsList = document.getElementById('modalAttachments');
                    attachmentsList.innerHTML = '';
                    
                    // Add attachments if they exist
                    if (ticket.attachments && ticket.attachments.length > 0) {
                        ticket.attachments.forEach(attachment => {
                            const li = document.createElement('li');
                            const a = document.createElement('a');
                            a.href = '#';
                            a.textContent = attachment;
                            li.appendChild(a);
                            attachmentsList.appendChild(li);
                        });
                    } else {
                        const li = document.createElement('li');
                        li.textContent = 'No attachments';
                        attachmentsList.appendChild(li);
                    }
                    
                    modal.style.display = 'flex';
                }
            });
        });

        closeModal.addEventListener('click', () => {
            modal.style.display = 'none';
        });

        window.addEventListener('click', (event) => {
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        });

        // Search functionality
        const searchInput = document.querySelector('.search-input');
        searchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            const ticketCards = document.querySelectorAll('.ticket-card');
            
            ticketCards.forEach(card => {
                const ticketId = card.getAttribute('data-id');
                const ticket = tickets.find(t => t.id === ticketId);
                const cardText = card.textContent.toLowerCase();
                
                if (cardText.includes(searchTerm) || (ticket && ticket.subject.toLowerCase().includes(searchTerm))) {
                    card.style.display = 'flex';
                } else {
                    card.style.display = 'none';
                }
            });
        });

        // Filter functionality
        const filterSelects = document.querySelectorAll('.filter-select');
        filterSelects.forEach(select => {
            select.addEventListener('change', () => {
                // This would be implemented based on your specific filtering needs
                console.log('Filter changed:', select.value);
            });
        });
    </script>
</body>
</html>
